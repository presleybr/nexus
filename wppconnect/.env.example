# =============================================================================
# CONFIGURAÇÕES DO SERVIDOR NEXUS WHATSAPP (Evolution API)
# =============================================================================

# Porta do servidor (Render usa PORT automaticamente)
PORT=3001

# =============================================================================
# EVOLUTION API - CONFIGURAÇÕES OBRIGATÓRIAS
# =============================================================================

# URL da sua Evolution API deployada no Render (PRODUÇÃO)
# ATENÇÃO: Substitua pelo nome real do seu serviço no Render (Passo 1.2 do guia)
# NÃO inclua "/" no final!
EVOLUTION_API_URL=https://nexus-evolution-api.onrender.com

# Chave de API da Evolution API
# IMPORTANTE: Use a MESMA chave que você definiu em AUTHENTICATION_API_KEY na Evolution API!
# ATENÇÃO: Substitua por uma senha FORTE e SECRETA!
EVOLUTION_API_KEY=NexusSecret2024!@#$%

# Nome da instância do WhatsApp
# IMPORTANTE: Use exatamente "nexus-crm" (mesma usada em /instance/create)
# NÃO mude este valor após criar a instância!
EVOLUTION_INSTANCE_NAME=nexus-crm

# =============================================================================
# BANCO DE DADOS POSTGRESQL (Render fornece automaticamente)
# =============================================================================

# Connection string do PostgreSQL
# Exemplo: postgresql://user:password@host:5432/database
# No Render, isso é preenchido automaticamente se você adicionar um PostgreSQL
DATABASE_URL=postgresql://user:password@host:5432/database

# =============================================================================
# INSTRUÇÕES DE CONFIGURAÇÃO
# =============================================================================

# PASSO 1: Deploy da Evolution API no Render
# --------------------------------------------
# GUIA COMPLETO: Leia INSTALACAO_EVOLUTION_API.md (raiz do projeto)
#
# Resumo rápido:
# 1. Acesse: https://dashboard.render.com/
# 2. New + → Web Service
# 3. Public Git Repository: https://github.com/EvolutionAPI/evolution-api
# 4. Name: nexus-evolution-api
# 5. Build: npm install
# 6. Start: npm start
# 7. Adicione as variáveis de ambiente (ver guia completo)
# 8. Create Web Service

# PASSO 2: Configurar Variáveis no Backend Nexus (PRODUÇÃO)
# ----------------------------------------------------------
# 1. Acesse: https://dashboard.render.com/
# 2. Selecione: nexus-crm-backend-6jxi (ou seu nome)
# 3. Vá em: Environment
# 4. Clique em: Add Environment Variable
# 5. Adicione EXATAMENTE estas 3 variáveis:
#
#    Key: EVOLUTION_API_URL
#    Value: https://nexus-evolution-api.onrender.com
#
#    Key: EVOLUTION_API_KEY
#    Value: NexusSecret2024!@#$%
#    (MESMA chave usada em AUTHENTICATION_API_KEY na Evolution API!)
#
#    Key: EVOLUTION_INSTANCE_NAME
#    Value: nexus-crm
#
# 6. DATABASE_URL já está configurado automaticamente pelo Render

# PASSO 3: Salvar e Aguardar Redeploy
# ------------------------------------
# 1. Clique em "Save Changes"
# 2. Render fará redeploy automático (3-5 minutos)
# 3. Aguarde aparecer "Live ✅"

# PASSO 4: Criar Instância WhatsApp
# ----------------------------------
# Use curl ou Postman:
#
# curl -X POST https://nexus-evolution-api.onrender.com/instance/create \
#   -H "apikey: NexusSecret2024!@#$%" \
#   -H "Content-Type: application/json" \
#   -d '{"instanceName":"nexus-crm","qrcode":true,"integration":"WHATSAPP-BAILEYS"}'

# PASSO 5: Testar no Frontend
# ----------------------------
# 1. Acesse seu frontend em produção
# 2. Vá para a aba WhatsApp
# 3. Clique em "Conectar WhatsApp"
# 4. Aguarde QR Code (pode demorar 10-20s no primeiro acesso)
# 5. Escaneie com WhatsApp do celular
# 6. Pronto!

# =============================================================================
# DICAS
# =============================================================================

# - A Evolution API persiste sessões automaticamente
# - Não precisa escanear QR Code toda vez
# - Se desconectar, basta clicar em "Conectar" novamente
# - Para ver logs: Dashboard Render → Logs
# - Para reiniciar: Dashboard Render → Manual Deploy → Clear build cache & deploy
